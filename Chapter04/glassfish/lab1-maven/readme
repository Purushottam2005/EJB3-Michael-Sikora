build/deploy as usual.

run:

C:\glassfish-3.1.1\bin>asadmin get-client-stubs --appname lab1-maven-ear-1.0 c:\local
Command get-client-stubs executed successfully.

C:\glassfish-3.1.1\bin>appclient -jar c:\local\lab1-maven-ear-1.0Client.jar 1
[Customer Id =1,first name=SIMON,last name=KING, referee=[referee id=1,name=SIR
JOHN DEED,comments=JUDGE],addresses={IndirectList: not instantiated},accounts={IndirectList: not instantiated}]

this is the schema generated by eclipselink:

CREATE TABLE CUSTOMER (ID INTEGER NOT NULL, FIRSTNAME VARCHAR(255), LASTNAME VARCHAR(255), REFEREE_ID INTEGER, PRIMARY KEY (ID))
ALTER TABLE CUSTOMER ADD CONSTRAINT CUSTOMERREFEREE_ID FOREIGN KEY (REFEREE_ID) REFERENCES REFEREE (ID)

CREATE TABLE ACCOUNT (ID INTEGER NOT NULL, ACCOUNTTYPE VARCHAR(255), BALANCE FLOAT, PRIMARY KEY (ID))

CREATE TABLE ADDRESS (ID INTEGER NOT NULL, ADDRESSLINE VARCHAR(255), COUNTRY VARCHAR(255), POSTCODE VARCHAR(255), PRIMARY KEY (ID))

CREATE TABLE REFEREE (ID INTEGER NOT NULL, COMMENTS VARCHAR(255), NAME VARCHAR(255), PRIMARY KEY (ID))

CREATE TABLE CUSTOMER_ACCOUNT (Customer_ID INTEGER NOT NULL, accounts_ID INTEGER NOT NULL, PRIMARY KEY (Customer_ID, accounts_ID))
ALTER TABLE CUSTOMER_ACCOUNT ADD CONSTRAINT CSTMRCCOUNTCstmrID FOREIGN KEY (Customer_ID) REFERENCES CUSTOMER (ID)
ALTER TABLE CUSTOMER_ACCOUNT ADD CONSTRAINT CSTMRCCOUNTccntsID FOREIGN KEY (accounts_ID) REFERENCES ACCOUNT (ID)

CREATE TABLE CUSTOMER_ADDRESS (Customer_ID INTEGER NOT NULL, addresses_ID INTEGER NOT NULL, PRIMARY KEY (Customer_ID, addresses_ID))
ALTER TABLE CUSTOMER_ADDRESS ADD CONSTRAINT CSTMRDDRESSCstmrID FOREIGN KEY (Customer_ID) REFERENCES CUSTOMER (ID)
ALTER TABLE CUSTOMER_ADDRESS ADD CONSTRAINT CSTMRDDRESSddrsssD FOREIGN KEY (addresses_ID) REFERENCES ADDRESS (ID)

if you wonder why onetomany and manytomany generated same schema when using defaults
i suggest you read this blog part I:
luisacevedo_blog: tipsjpamap

if you also want to know why accounts and addresss show IndirectList: not instantiated
i suggest you read same blog part II:
luisacevedo_blog: tipsjpamap



